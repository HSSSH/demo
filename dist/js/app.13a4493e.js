(function(t){function e(e){for(var n,s,r=e[0],c=e[1],l=e[2],u=0,m=[];u<r.length;u++)s=r[u],a[s]&&m.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var h=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"06ec":function(t,e,i){"use strict";var n=i("d659"),a=i.n(n);a.a},"14e9":function(t,e,i){"use strict";var n=i("e6e2"),a=i.n(n);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var n=i("a026"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"header"},[i("ul",[i("li",[i("router-link",{attrs:{to:"/design"}},[t._v("制作")])],1),i("li",[i("router-link",{attrs:{to:"/display"}},[t._v("浏览")])],1),i("li",[i("router-link",{attrs:{to:"/test"}},[t._v("XXX")])],1)])]),i("router-view",{staticClass:"content-view"})],1)},o=[],s=i("8c4f"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"design"}},[i("div",{staticClass:"design-area",attrs:{id:"designArea"},on:{drop:function(e){t.drop(e)},dragover:function(e){t.allowDrop(e)}}},[t._l(t.rects,function(e){return i("VueDragResize",{key:e.id,style:{background:e.color,visibility:e.visibility},attrs:{w:e.width,h:e.height,x:e.left,y:e.top,parentW:t.listWidth,parentH:t.listHeight,axis:e.axis,isActive:e.active,minw:e.minw,minh:e.minh,isDraggable:e.draggable,isResizable:e.resizable,parentLimitation:e.parentLim,aspectRatio:e.aspectRatio,preventActiveBehavior:e.unableActive,z:e.zIndex},on:{activated:function(i){t.activateEv("rects",e.id)},deactivated:function(i){t.deactivateEv("rects",e.id)},dragging:function(i){t.changePosition(i,"rects",e.id)},resizing:function(i){t.changeSize(i,"rects",e.id)},focusContainer:function(i){t.focusContainer("rects",e.id)}}},[i("myElement",{style:e.element.style,attrs:{type:e.element.type,config:e.element.config}})],1)}),i("div",{staticClass:"cover",style:{visibility:t.coverVisible?"visible":"hidden"}})],2),i("div",{staticClass:"design-tool"},[i("designTools",{attrs:{coverVisible:t.coverVisible,currentEle:t.topChoose.element}})],1),i("div",{staticClass:"design-data"},[t.topChoose.element?i("elementSet",{attrs:{type:t.topChoose.element.type,config:t.topChoose.element.config}}):t._e(),i("div",[t.topChoose.element?i("button",{staticClass:"btn btn-primary",on:{click:function(e){t.preStep()}}},[t._v("上一级")]):t._e(),t.topChoose.element?i("button",{staticClass:"btn btn-primary",on:{click:function(e){t.quitFocus()}}},[t._v("退出")]):t._e()]),i("button",{staticClass:"btn btn-primary check-tree",on:{click:function(e){t.checkTree()}}},[t._v("查看结构")])],1)])},c=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vdr",class:t.active||t.isActive?"active":"inactive",style:t.style,on:{mousedown:function(e){t.bodyDown(e)},touchstart:function(e){t.bodyDown(e)},dblclick:function(e){t.focusContainer()}}},[i("div",{staticClass:"inside-container"},[t._t("default")],2),t._l(t.sticks,function(e){return i("div",{staticClass:"vdr-stick",class:["vdr-stick-"+e,t.isResizable?"":"not-resizable"],style:t.vdrStick(e),on:{mousedown:function(i){i.stopPropagation(),i.preventDefault(),t.stickDown(e,i)},touchstart:function(i){i.stopPropagation(),i.preventDefault(),t.stickDown(e,i)}}})})],2)},h=[],u=(i("28a5"),i("6b54"),i("c5f6"),8),m={y:{t:"top",m:"marginTop",b:"bottom"},x:{l:"left",m:"marginLeft",r:"right"}},d={name:"vue-drag-resize",props:{parentScaleX:{type:Number,default:1},parentScaleY:{type:Number,default:1},isActive:{type:Boolean,default:!1},preventActiveBehavior:{type:Boolean,default:!1},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},aspectRatio:{type:Boolean,default:!1},parentLimitation:{type:Boolean,default:!1},parentW:{type:Number,default:0,validator:function(t){return t>=0}},parentH:{type:Number,default:0,validator:function(t){return t>=0}},w:{type:Number,default:100,validator:function(t){return t>0}},h:{type:Number,default:100,validator:function(t){return t>0}},minw:{type:Number,default:50,validator:function(t){return t>0}},minh:{type:Number,default:50,validator:function(t){return t>0}},x:{type:Number,default:0,validator:function(t){return"number"===typeof t}},y:{type:Number,default:0,validator:function(t){return"number"===typeof t}},z:{type:[String,Number],default:"auto",validator:function(t){var e="string"===typeof t?"auto"===t:t>=0;return e}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},sticks:{type:Array,default:function(){return["tl","tm","tr","mr","br","bm","bl","ml"]}},axis:{type:String,default:"both",validator:function(t){return-1!==["x","y","both","none"].indexOf(t)}}},data:function(){return{active:this.isActive,rawWidth:this.w,rawHeight:this.h,rawLeft:this.x,rawTop:this.y,rawRight:null,rawBottom:null,zIndex:this.z,aspectFactor:this.w/this.h,parentWidth:null,parentHeight:null,left:this.x,top:this.y,right:null,bottom:null,minWidth:this.minw,minHeight:this.minh}},created:function(){this.stickDrag=!1,this.bodyDrag=!1,this.stickAxis=null,this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null},this.currentStick=[]},mounted:function(){if(this.parentElement=this.$el.parentNode,this.parentWidth=this.parentW?this.parentW:this.parentElement.clientWidth,this.parentHeight=this.parentH?this.parentH:this.parentElement.clientHeight,this.rawRight=this.parentWidth-this.rawWidth-this.rawLeft,this.rawBottom=this.parentHeight-this.rawHeight-this.rawTop,document.documentElement.addEventListener("mousemove",this.move),document.documentElement.addEventListener("mouseup",this.up),document.documentElement.addEventListener("mouseleave",this.up),document.documentElement.addEventListener("mousedown",this.deselect),document.documentElement.addEventListener("touchmove",this.move,!0),document.documentElement.addEventListener("touchend touchcancel",this.up,!0),document.documentElement.addEventListener("touchstart",this.up,!0),this.dragHandle){var t=Array.prototype.slice.call(this.$el.querySelectorAll(this.dragHandle));for(var e in t)t[e].setAttribute("data-drag-handle",this._uid)}if(this.dragCancel){var i=Array.prototype.slice.call(this.$el.querySelectorAll(this.dragCancel));for(var n in i)i[n].setAttribute("data-drag-cancel",this._uid)}},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.move),document.documentElement.removeEventListener("mouseup",this.up),document.documentElement.removeEventListener("mouseleave",this.up),document.documentElement.removeEventListener("mousedown",this.deselect),document.documentElement.removeEventListener("touchmove",this.move,!0),document.documentElement.removeEventListener("touchend touchcancel",this.up,!0),document.documentElement.removeEventListener("touchstart",this.up,!0)},methods:{deselect:function(){this.preventActiveBehavior||(this.active=!1)},move:function(t){(this.stickDrag||this.bodyDrag)&&(t.stopPropagation(),this.stickDrag&&this.stickMove(t),this.bodyDrag&&this.bodyMove(t))},up:function(t){this.stickDrag&&this.stickUp(t),this.bodyDrag&&this.bodyUp(t)},bodyDown:function(t){if(!this.preventActiveBehavior){var e=t.target||t.srcElement;this.active=!0,t.button&&0!==t.button||this.isDraggable&&this.active&&(this.dragHandle&&e.getAttribute("data-drag-handle")!==this._uid.toString()||this.dragCancel&&e.getAttribute("data-drag-cancel")===this._uid.toString()||(t.stopPropagation(),t.preventDefault(),this.bodyDrag=!0,this.stickStartPos.mouseX=t.pageX||t.touches[0].pageX,this.stickStartPos.mouseY=t.pageY||t.touches[0].pageY,this.stickStartPos.left=this.left,this.stickStartPos.right=this.right,this.stickStartPos.top=this.top,this.stickStartPos.bottom=this.bottom,this.parentLimitation&&(this.limits=this.calcDragLimitation())))}},calcDragLimitation:function(){var t=this.parentWidth,e=this.parentHeight;return{minLeft:0,maxLeft:t-this.width,minRight:0,maxRight:t-this.width,minTop:0,maxTop:e-this.height,minBottom:0,maxBottom:e-this.height}},bodyMove:function(t){var e=this.stickStartPos,i={x:("y"!==this.axis&&"none"!==this.axis?e.mouseX-(t.pageX||t.touches[0].pageX):0)/this.parentScaleX,y:("x"!==this.axis&&"none"!==this.axis?e.mouseY-(t.pageY||t.touches[0].pageY):0)/this.parentScaleY};this.rawTop=e.top-i.y,this.rawBottom=e.bottom+i.y,this.rawLeft=e.left-i.x,this.rawRight=e.right+i.x,this.$emit("dragging",this.rect)},bodyUp:function(){this.bodyDrag=!1,this.$emit("dragging",this.rect),this.$emit("dragstop",this.rect),this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},stickDown:function(t,e){if(this.isResizable&&this.active){switch(this.stickDrag=!0,this.stickStartPos.mouseX=e.pageX||e.touches[0].pageX,this.stickStartPos.mouseY=e.pageY||e.touches[0].pageY,this.stickStartPos.left=this.left,this.stickStartPos.right=this.right,this.stickStartPos.top=this.top,this.stickStartPos.bottom=this.bottom,this.currentStick=t.split(""),this.stickAxis=null,this.currentStick[0]){case"b":this.stickAxis="y";break;case"t":this.stickAxis="y";break}switch(this.currentStick[1]){case"r":this.stickAxis="y"===this.stickAxis?"xy":"x";break;case"l":this.stickAxis="y"===this.stickAxis?"xy":"x";break}this.limits=this.calcResizeLimitation()}},calcResizeLimitation:function(){var t=this.minWidth,e=this.minHeight,i=this.aspectFactor,n=this.width,a=this.height,o=this.bottom,s=this.top,r=this.left,c=this.right,l=this.stickAxis,h=this.parentLimitation?0:null;this.aspectRatio&&(t/e>i?e=t/i:t=i*e);var u={minLeft:h,maxLeft:r+(n-t),minRight:h,maxRight:c+(n-t),minTop:h,maxTop:s+(a-e),minBottom:h,maxBottom:o+(a-e)};if(this.aspectRatio){var m={minLeft:r-Math.min(s,o)*i*2,maxLeft:r+(a-e)/2*i*2,minRight:c-Math.min(s,o)*i*2,maxRight:c+(a-e)/2*i*2,minTop:s-Math.min(r,c)/i*2,maxTop:s+(n-t)/2/i*2,minBottom:o-Math.min(r,c)/i*2,maxBottom:o+(n-t)/2/i*2};"x"===l?u={minLeft:Math.max(u.minLeft,m.minLeft),maxLeft:Math.min(u.maxLeft,m.maxLeft),minRight:Math.max(u.minRight,m.minRight),maxRight:Math.min(u.maxRight,m.maxRight)}:"y"===l&&(u={minTop:Math.max(u.minTop,m.minTop),maxTop:Math.min(u.maxTop,m.maxTop),minBottom:Math.max(u.minBottom,m.minBottom),maxBottom:Math.min(u.maxBottom,m.maxBottom)})}return u},stickMove:function(t){var e=this.stickStartPos,i={x:(e.mouseX-(t.pageX||t.touches[0].pageX))/this.parentScaleX,y:(e.mouseY-(t.pageY||t.touches[0].pageY))/this.parentScaleY};switch(this.currentStick[0]){case"b":this.rawBottom=e.bottom+i.y;break;case"t":this.rawTop=e.top-i.y;break}switch(this.currentStick[1]){case"r":this.rawRight=e.right+i.x;break;case"l":this.rawLeft=e.left-i.x;break}this.$emit("resizing",this.rect)},stickUp:function(){this.stickDrag=!1,this.stickStartPos={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.limits={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null},this.rawTop=this.top,this.rawBottom=this.bottom,this.rawLeft=this.left,this.rawRight=this.right,this.stickAxis=null,this.$emit("resizing",this.rect),this.$emit("resizestop",this.rect)},aspectRatioCorrection:function(){if(this.aspectRatio){var t=this.bottom,e=this.top,i=this.left,n=this.right,a=this.width,o=this.height,s=this.aspectFactor,r=this.currentStick;if(a/o>s){var c=s*o;"l"===r[1]?this.left=i+a-c:this.right=n+a-c}else{var l=a/s;"t"===r[0]?this.top=e+o-l:this.bottom=t+o-l}}},focusContainer:function(){this.preventActiveBehavior||this.$emit("focusContainer")}},computed:{style:function(){return{top:this.top+"px",left:this.left+"px",width:this.width+"px",height:this.height+"px",zIndex:this.zIndex}},vdrStick:function(){var t=this;return function(e){var i={width:"".concat(u/t.parentScaleX,"px"),height:"".concat(u/t.parentScaleY,"px")};return i[m.y[e[0]]]="".concat(u/t.parentScaleX/-2,"px"),i[m.x[e[1]]]="".concat(u/t.parentScaleX/-2,"px"),i}},width:function(){return this.parentWidth-this.left-this.right},height:function(){return this.parentHeight-this.top-this.bottom},rect:function(){return{left:Math.round(this.left),top:Math.round(this.top),width:Math.round(this.width),height:Math.round(this.height)}}},watch:{rawLeft:function(t){var e=this.limits,i=this.stickAxis,n=this.aspectFactor,a=this.aspectRatio,o=this.left,s=this.bottom,r=this.top;if(null!==e.minLeft&&t<e.minLeft?t=e.minLeft:null!==e.maxLeft&&e.maxLeft<t&&(t=e.maxLeft),a&&"x"===i){var c=o-t;this.rawTop=r-c/n/2,this.rawBottom=s-c/n/2}this.left=t},rawRight:function(t){var e=this.limits,i=this.stickAxis,n=this.aspectFactor,a=this.aspectRatio,o=this.right,s=this.bottom,r=this.top;if(null!==e.minRight&&t<e.minRight?t=e.minRight:null!==e.maxRight&&e.maxRight<t&&(t=e.maxRight),a&&"x"===i){var c=o-t;this.rawTop=r-c/n/2,this.rawBottom=s-c/n/2}this.right=t},rawTop:function(t){var e=this.limits,i=this.stickAxis,n=this.aspectFactor,a=this.aspectRatio,o=this.right,s=this.left,r=this.top;if(null!==e.minTop&&t<e.minTop?t=e.minTop:null!==e.maxTop&&e.maxTop<t&&(t=e.maxTop),a&&"y"===i){var c=r-t;this.rawLeft=s-c*n/2,this.rawRight=o-c*n/2}this.top=t},rawBottom:function(t){var e=this.limits,i=this.stickAxis,n=this.aspectFactor,a=this.aspectRatio,o=this.right,s=this.left,r=this.bottom;if(null!==e.minBottom&&t<e.minBottom?t=e.minBottom:null!==e.maxBottom&&e.maxBottom<t&&(t=e.maxBottom),a&&"y"===i){var c=r-t;this.rawLeft=s-c*n/2,this.rawRight=o-c*n/2}this.bottom=t},width:function(){this.aspectRatioCorrection()},height:function(){this.aspectRatioCorrection()},active:function(t){t?this.$emit("activated"):this.$emit("deactivated")},isActive:function(t){this.active=t},z:function(t){(t>=0||"auto"===t)&&(this.zIndex=t)},aspectRatio:function(t){t&&(this.aspectFactor=this.width/this.height)},minw:function(t){t>0&&t<=this.width&&(this.minWidth=t)},minh:function(t){t>0&&t<=this.height&&(this.minHeight=t)},x:function(){if(!this.stickDrag&&!this.bodyDrag){this.parentLimitation&&(this.limits=this.calcDragLimitation());var t=this.x-this.left;this.rawLeft=this.x,this.rawRight=this.right-t}},y:function(){if(!this.stickDrag&&!this.bodyDrag){this.parentLimitation&&(this.limits=this.calcDragLimitation());var t=this.y-this.top;this.rawTop=this.y,this.rawBottom=this.bottom-t}},w:function(){if(!this.stickDrag&&!this.bodyDrag){this.currentStick=["m","r"],this.stickAxis="x",this.parentLimitation&&(this.limits=this.calcResizeLimitation());var t=this.width-this.w;this.rawRight=this.right+t}},h:function(){if(!this.stickDrag&&!this.bodyDrag){this.currentStick=["b","m"],this.stickAxis="y",this.parentLimitation&&(this.limits=this.calcResizeLimitation());var t=this.height-this.h;this.rawBottom=this.bottom+t}},parentW:function(t){this.right=t-this.width-this.left,this.parentWidth=t},parentH:function(t){this.bottom=t-this.height-this.top,this.parentHeight=t}}},f=d,p=(i("6cf1"),i("2877")),g=Object(p["a"])(f,l,h,!1,null,null,null);g.options.__file="dragResize.vue";var v=g.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"panel"==t.type?i("div",{on:{drop:function(e){t.drop(e)},dragover:function(e){t.allowDrop(e)}}},[t._l(t.myConfig.children,function(e){return i("VueDragResize",{key:e.id,style:{background:e.color,visibility:e.visibility},attrs:{w:e.width,h:e.height,x:e.left,y:e.top,parentW:t.myConfig.width,parentH:t.myConfig.height,axis:e.axis,isActive:e.active,minw:e.minw,minh:e.minh,isDraggable:e.draggable,isResizable:e.resizable,parentLimitation:e.parentLim,aspectRatio:e.aspectRatio,preventActiveBehavior:e.unableActive,z:e.zIndex},on:{activated:function(i){t.activateEv("rects",e.id)},deactivated:function(i){t.deactivateEv("rects",e.id)},dragging:function(i){t.changePosition(i,"rects",e.id)},resizing:function(i){t.changeSize(i,"rects",e.id)},focusContainer:function(i){t.focusContainer("rects",e.id)}}},[i("my-element",{style:e.element.style,attrs:{type:e.element.type,config:e.element.config}})],1)}),i("div",{staticClass:"panel-cover",style:{visibility:t.myConfig.coverVisible?"visible":"hidden"}})],2):"picture"==t.type?i("div",[i("img",{staticClass:"default-img",style:t.myConfig.eleStyle,attrs:{src:t.myConfig.src}})]):"label"==t.type?i("div",[i("span",{staticClass:"default-label",style:t.myConfig.eleStyle},[t._v(t._s(t.myConfig.text))])]):"navigate"==t.type?i("div",[i("ul",{staticClass:"default-nav"},t._l(t.myConfig.data,function(e,n){return i("li",{key:n,style:t.myConfig.flag==n?t.myConfig.chooseStyle:t.myConfig.eleStyle,on:{click:function(e){t.myConfig.flag=n}}},[t._v(t._s(e.text))])})),i("div",{staticClass:"default-nav-content"},t._l(t.myConfig.children[t.myConfig.flag],function(e,n){return i("div",{key:n,style:e.style},t._l(e.allElements,function(t,e){return i("my-element",{key:e,style:t.style,attrs:{type:t.type,myConfig:t.myConfig}})}))}))]):"slidePic"==t.type?i("div",[i("div",{staticClass:"default-slidePic",style:t.myConfig.eleStyle},t._l(t.myConfig.imgData,function(e,n){return t.myConfig.currentIndex==n?i("div",{key:n,style:e.eleStyle,on:{click:function(e){t.myConfig.currentIndex=(t.myConfig.currentIndex+1)%t.myConfig.imgData.length}}}):t._e()}))]):"article"==t.type?i("div",[i("div",{staticClass:"default-article",style:t.myConfig.eleStyle},[i("div",{staticClass:"header"},[i("span",[t._v(t._s(t.myConfig.title))]),i("a",{attrs:{href:""}},[t._v(t._s(t.myConfig.moreInfo))])]),i("ul",t._l(t.myConfig.content,function(e,n){return i("li",{key:n},[i("a",[t._v(t._s(e.text))])])}))])]):t._e()},b=[],E={name:"my-element",components:{VueDragResize:v},props:["config","type"],data:function(){return{}},mounted:function(){},computed:{myConfig:function(){return this.config}},methods:{activateEv:function(t,e){this.$store.dispatch("rect/setActive",{name:t,id:e})},deactivateEv:function(t,e){this.$store.dispatch("rect/unsetActive",{name:t,id:e})},changePosition:function(t,e,i){this.$store.dispatch("rect/setTop",{name:e,id:i,top:t.top}),this.$store.dispatch("rect/setLeft",{name:e,id:i,left:t.left}),this.$store.dispatch("rect/setWidth",{name:e,id:i,width:t.width}),this.$store.dispatch("rect/setHeight",{name:e,id:i,height:t.height})},changeSize:function(t,e,i){this.$store.dispatch("rect/setTop",{name:e,id:i,top:t.top}),this.$store.dispatch("rect/setLeft",{name:e,id:i,left:t.left}),this.$store.dispatch("rect/setWidth",{name:e,id:i,width:t.width}),this.$store.dispatch("rect/setHeight",{name:e,id:i,height:t.height})},focusContainer:function(t,e){this.$store.dispatch("rect/focusContainer",{name:t,id:e})},allowDrop:function(t){this.myConfig.allowDrop&&t.preventDefault()},drop:function(t){if(this.myConfig.allowDrop){t.preventDefault();var e=t.dataTransfer.getData("myEle"),i=this.$store.state.rect.currentChoose.length?this.$store.state.rect.currentChoose[this.$store.state.rect.currentChoose.length-1].id:-1;this.myConfig.currentPanelId==i&&this.$store.dispatch("rect/addNewRect",{name:"rects",parentId:i,eleType:e,x:t.layerX,y:t.layerY})}}}},x=E,_=(i("06ec"),Object(p["a"])(x,y,b,!1,null,"40434d96",null));_.options.__file="myElement.vue";var C=_.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"panel"==t.type?i("div",[t._v("\n    面板\n")]):"picture"==t.type?i("div",[t._v("\n    图片\n")]):"label"==t.type?i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.eleConfig.text,expression:"eleConfig.text"}],domProps:{value:t.eleConfig.text},on:{input:function(e){e.target.composing||t.$set(t.eleConfig,"text",e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.eleConfig.eleStyle["font-size"],expression:"eleConfig.eleStyle['font-size']"}],attrs:{type:"number"},domProps:{value:t.eleConfig.eleStyle["font-size"]},on:{input:function(e){e.target.composing||t.$set(t.eleConfig.eleStyle,"font-size",e.target.value)}}}),i("span",[t._v("px")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.eleConfig.eleStyle["font-weight"],expression:"eleConfig.eleStyle['font-weight']"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.eleConfig.eleStyle,"font-weight",e.target.multiple?i:i[0])}}},t._l(t.labelWeightList,function(e,n){return i("option",{key:n,domProps:{value:e.type}},[t._v(t._s(e.name))])})),i("select",{directives:[{name:"model",rawName:"v-model",value:t.eleConfig.eleStyle["font-family"],expression:"eleConfig.eleStyle['font-family']"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.eleConfig.eleStyle,"font-family",e.target.multiple?i:i[0])}}},t._l(t.labelfontList,function(e,n){return i("option",{key:n,domProps:{value:e.type}},[t._v(t._s(e.name))])}))]):"navigate"==t.type?i("div",[t._v("\n    导航栏\n")]):"slidePic"==t.type?i("div",[t._v("\n    轮播\n")]):"article"==t.type?i("div",[t._v("\n    文章\n")]):t._e()},w=[],L=(i("a481"),{name:"elementSet",props:["config","type"],components:{},data:function(){return{eleConfig:this.init(),labelWeightList:[{name:"默认",type:"normal"},{name:"粗",type:"bold"},{name:"加粗",type:"bolder"},{name:"细",type:"lighter"}],labelfontList:[{name:"黑体",type:"黑体"},{name:"宋体",type:"宋体"},{name:"微软雅黑",type:"微软雅黑"}]}},mounted:function(){},computed:{},watch:{config:{handler:function(t,e){this.eleConfig=this.init()},deep:!1},eleConfig:{handler:function(t,e){this.changeConfig(t)},deep:!0}},methods:{init:function(){var t=this.config?JSON.parse(JSON.stringify(this.config)):{};return t.eleStyle&&t.eleStyle["font-size"]&&(t.eleStyle["font-size"]=parseInt(t.eleStyle["font-size"].replace("px",""))),t},changeConfig:function(t){this.$store.dispatch("rect/changeConfig",t)}}}),S=L,T=(i("f1d8"),Object(p["a"])(S,A,w,!1,null,"513a1c20",null));T.options.__file="elementSetting.vue";var N=T.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tools"},t._l(t.toolList,function(e,n){return i("div",{key:n},[i("p",[t._v(t._s(e.text))]),i("div",t._l(e.children,function(e){return i("button",{key:e.type,staticClass:"btn btn-primary",attrs:{draggable:"true",id:e.type,disabled:t.coverVisible&&t.currentEle&&"panel"!=t.currentEle.type},on:{dragstart:function(e){t.dragEle(e)}}},[t._v("\r\n                "+t._s(e.text)+"\r\n            ")])}))])}))},I=[],R={name:"designTools",props:["coverVisible","currentEle"],data:function(){return{toolList:[{text:"面板元素",children:[{text:"布局1",type:"panel"}]},{text:"组件元素",children:[{text:"文字",type:"label"},{text:"图片",type:"picture"}]}]}},mounted:function(){},methods:{dragEle:function(t){t.dataTransfer.setData("myEle",t.target.id)}},watch:{coverVisible:function(){}}},B=R,D=(i("780e"),Object(p["a"])(B,k,I,!1,null,"6e697fde",null));D.options.__file="designTools.vue";var O=D.exports,H={name:"design",components:{VueDragResize:v,myElement:C,designTools:O,elementSet:N},data:function(){return{listWidth:0,listHeight:0,coverVisible:!1,dropCtrl:!0}},mounted:function(){var t=this,e=document.getElementById("designArea");this.listWidth=e.clientWidth,this.listHeight=e.clientHeight,window.addEventListener("resize",function(){t.listWidth=e.clientWidth,t.listHeight=e.clientHeight})},computed:{rects:function(){return this.$store.state.rect.rects},topChoose:function(){return this.$store.state.rect.currentChoose.length?this.$store.state.rect.currentChoose[this.$store.state.rect.currentChoose.length-1]:{}}},methods:{activateEv:function(t,e){this.$store.dispatch("rect/setActive",{name:t,id:e})},deactivateEv:function(t,e){this.$store.dispatch("rect/unsetActive",{name:t,id:e})},changePosition:function(t,e,i){this.$store.dispatch("rect/setTop",{name:e,id:i,top:t.top}),this.$store.dispatch("rect/setLeft",{name:e,id:i,left:t.left}),this.$store.dispatch("rect/setWidth",{name:e,id:i,width:t.width}),this.$store.dispatch("rect/setHeight",{name:e,id:i,height:t.height})},changeSize:function(t,e,i){this.$store.dispatch("rect/setTop",{name:e,id:i,top:t.top}),this.$store.dispatch("rect/setLeft",{name:e,id:i,left:t.left}),this.$store.dispatch("rect/setWidth",{name:e,id:i,width:t.width}),this.$store.dispatch("rect/setHeight",{name:e,id:i,height:t.height})},focusContainer:function(t,e){this.coverVisible=!0,this.dropCtrl=!1,this.$store.dispatch("rect/focusContainer",{name:t,id:e})},preStep:function(){1==this.$store.state.rect.currentChoose.length&&(this.coverVisible=!1,this.dropCtrl=!0),this.$store.dispatch("rect/preStep")},quitFocus:function(){this.coverVisible=!1,this.dropCtrl=!0,this.$store.dispatch("rect/quitFocus")},allowDrop:function(t){this.dropCtrl&&t.preventDefault()},drop:function(t){if(this.dropCtrl){t.preventDefault();var e=t.dataTransfer.getData("myEle");this.$store.dispatch("rect/addNewRect",{name:"rects",parentId:-1,eleType:e,x:t.layerX,y:t.layerY})}},checkTree:function(){console.log(this.$store.state.rect.rects)}}},z=H,P=(i("6a60"),Object(p["a"])(z,r,c,!1,null,"9baf8cd8",null));P.options.__file="design.vue";var $=P.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"display"}},t._l(t.componentList,function(t,e){return i("layoutRect",{key:e,attrs:{w:t.width,h:t.height,x:t.left,y:t.top,z:t.zIndex}},[i("myElement",{style:t.element.style,attrs:{type:t.element.type,config:t.element.config}})],1)}))},j=[],X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"layout",style:t.style},[i("div",{staticClass:"inside-container"},[t._t("default")],2)])},W=[],M={name:"vue-drag-resize",props:{w:{type:Number,default:100,validator:function(t){return t>0}},h:{type:Number,default:100,validator:function(t){return t>0}},x:{type:Number,default:0,validator:function(t){return"number"===typeof t}},y:{type:Number,default:0,validator:function(t){return"number"===typeof t}},z:{type:[String,Number],default:"auto",validator:function(t){var e="string"===typeof t?"auto"===t:t>=0;return e}}},computed:{style:function(){return{top:this.y+"px",left:this.x+"px",width:this.w+"px",height:this.h+"px",zIndex:this.z}}}},V=M,Y=(i("db45"),Object(p["a"])(V,X,W,!1,null,null,null));Y.options.__file="layoutRect.vue";var F=Y.exports,U={name:"display",components:{myElement:C,layoutRect:F},data:function(){return{componentList:this.$store.state.rect.rects}},methods:{init:function(){}}},J=U,Z=(i("e6e8"),Object(p["a"])(J,G,j,!1,null,"8c2e2050",null));Z.options.__file="display.vue";var q=Z.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v("\r\n        "+t._s(t.tree)+"\r\n    ")])])},K=[];n["a"].component("my-component",{template:"<div>XCXX</div>",data:function(){return{}}});var tt={name:"test",components:{},data:function(){return{mess:"fsf",tree:this.$store.state.rect.rects}}},et=tt,it=Object(p["a"])(et,Q,K,!1,null,null,null);it.options.__file="test.vue";var nt=it.exports;n["a"].use(s["a"]);var at=new s["a"]({routes:[{path:"/",name:"App",component:lt,redirect:{name:"design"}},{path:"/design",name:"design",component:$},{path:"/display",name:"display",component:q},{path:"/test",name:"test",component:nt}]}),ot={name:"app",router:at,components:{}},st=ot,rt=(i("78a8"),i("eb37"),i("14e9"),Object(p["a"])(st,a,o,!1,null,"79b1bb00",null));rt.options.__file="App.vue";var ct,lt=rt.exports,ht=i("2f62"),ut=(i("7f7f"),"ENABLE_ACTIVE"),mt="DISABLE_ACTIVE",dt="ENABLE_DRAGGABLE",ft="DISABLE_DRAGGABLE",pt="ENABLE_RESIZABLE",gt="DISABLE_RESIZABLE",vt="ENABLE_PARENT_LIMITATION",yt="DISABLE_PARENT_LIMITATION",bt="ENABLE_ASPECT",Et="DISABLE_ASPECT",xt="ENABLE_X_AXIS",_t="ENABLE_Y_AXIS",Ct="ENABLE_BOTH_AXIS",At="ENABLE_NONE_AXIS",wt="CHANGE_ZINDEX",Lt="CHANGE_MINW",St="CHANGE_MINH",Tt="CHANGE_WIDTH",Nt="CHANGE_HEIGHT",kt="CHANGE_TOP",It="CHANGE_LEFT",Rt="ADD_NEW_RECT",Bt="FOCUS_CONTAINER",Dt="PRE_STEP",Ot="QUIT_FOCUS",Ht="CHANGE_CONFIG",zt={ENABLE_ACTIVE:ut,DISABLE_ACTIVE:mt,ENABLE_DRAGGABLE:dt,DISABLE_DRAGGABLE:ft,ENABLE_RESIZABLE:pt,DISABLE_RESIZABLE:gt,ENABLE_PARENT_LIMITATION:vt,DISABLE_PARENT_LIMITATION:yt,ENABLE_ASPECT:bt,DISABLE_ASPECT:Et,ENABLE_X_AXIS:xt,ENABLE_Y_AXIS:_t,ENABLE_NONE_AXIS:At,ENABLE_BOTH_AXIS:Ct,CHANGE_ZINDEX:wt,CHANGE_MINW:Lt,CHANGE_MINH:St,CHANGE_WIDTH:Tt,CHANGE_HEIGHT:Nt,CHANGE_TOP:kt,CHANGE_LEFT:It,ADD_NEW_RECT:Rt,FOCUS_CONTAINER:Bt,PRE_STEP:Dt,QUIT_FOCUS:Ot,CHANGE_CONFIG:Ht},Pt={setActive:function(t,e){var i=t.commit,n=(t.state,e.name),a=e.id;i(zt.ENABLE_ACTIVE,{name:n,id:a})},unsetActive:function(t,e){var i=t.commit,n=e.name,a=e.id;i(zt.DISABLE_ACTIVE,{name:n,id:a})},toggleDraggable:function(t,e){var i=t.commit,n=(t.state,e.name),a=e.id;i(zt.TOGGLE_DRAGGABLE,{name:n,id:a})},toggleResizable:function(t,e){var i=t.commit,n=(t.state,e.name),a=e.id;i(zt.TOGGLE_RESIZABLE,{name:n,id:a})},toggleParentLimitation:function(t,e){var i=t.commit,n=(t.state,e.name),a=e.id;i(zt.PARENT_LIMITATION,{name:n,id:a})},setAspect:function(t,e){var i=t.commit,n=e.name,a=e.id;i(zt.ENABLE_ASPECT,{name:n,id:a})},unsetAspect:function(t,e){var i=t.commit,n=e.name,a=e.id;i(zt.DISABLE_ASPECT,{name:n,id:a})},setWidth:function(t,e){var i=t.commit,n=e.name,a=e.id,o=e.width;i(zt.CHANGE_WIDTH,{name:n,id:a,width:o})},setHeight:function(t,e){var i=t.commit,n=e.name,a=e.id,o=e.height;i(zt.CHANGE_HEIGHT,{name:n,id:a,height:o})},setTop:function(t,e){var i=t.commit,n=e.name,a=e.id,o=e.top;i(zt.CHANGE_TOP,{name:n,id:a,top:o})},setLeft:function(t,e){var i=t.commit,n=e.name,a=e.id,o=e.left;i(zt.CHANGE_LEFT,{name:n,id:a,left:o})},changeXLock:function(t,e){var i=t.commit,n=(t.state,e.name),a=e.id;i(zt.CHANGE_XLOCK,{name:n,id:a})},changeYLock:function(t,e){var i=t.commit,n=(t.state,e.name),a=e.id;i(zt.CHANGE_YLOCK,{name:n,id:a})},changeZToBottom:function(t,e){t.commit,t.state,e.name,e.id},changeZToTop:function(t,e){t.commit,t.state,e.name,e.id},setMinWidth:function(t,e){var i=t.commit,n=e.name,a=e.id,o=e.width;i(zt.CHANGE_MINW,{name:n,id:a,minw:o})},setMinHeight:function(t,e){var i=t.commit,n=e.name,a=e.id,o=e.height;i(zt.CHANGE_MINH,{name:n,id:a,minh:o})},addNewRect:function(t,e){var i=t.commit,n=e.name,a=e.parentId,o=e.eleType,s=e.x,r=e.y;i(zt.ADD_NEW_RECT,{name:n,parentId:a,eleType:o,x:s,y:r})},focusContainer:function(t,e){var i=t.commit,n=e.name,a=e.id;i(zt.FOCUS_CONTAINER,{name:n,id:a})},preStep:function(t){var e=t.commit;e(zt.PRE_STEP)},quitFocus:function(t){var e=t.commit;e(zt.QUIT_FOCUS)},changeConfig:function(t,e){var i=t.commit;i(zt.CHANGE_CONFIG,e)}},$t={getActive:function(t){for(var e=0,i=t.rects.length;e<i;e++){var n=t.rects[e];if(n.active)return e}return null}},Gt=i("a322"),jt=(i("ac6a"),ct={},Object(Gt["a"])(ct,ut,function(t,e){for(var i=Wt(t[e.name]),n=0;n<i.length;n++)i[n].active=i[n].id==e.id}),Object(Gt["a"])(ct,mt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.active=!1)}),Object(Gt["a"])(ct,bt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.aspectRatio=!0)}),Object(Gt["a"])(ct,Et,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.aspectRatio=!1)}),Object(Gt["a"])(ct,dt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.draggable=!0)}),Object(Gt["a"])(ct,ft,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.draggable=!1)}),Object(Gt["a"])(ct,pt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.resizable=!0)}),Object(Gt["a"])(ct,gt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.resizable=!1)}),Object(Gt["a"])(ct,Ct,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.axis="both")}),Object(Gt["a"])(ct,At,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.axis="none")}),Object(Gt["a"])(ct,xt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.axis="x")}),Object(Gt["a"])(ct,_t,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.axis="y")}),Object(Gt["a"])(ct,vt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.parentLim=!0)}),Object(Gt["a"])(ct,yt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.parentLim=!1),t[e.name][e.id].parentLim=!1}),Object(Gt["a"])(ct,wt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.zIndex=e.zIndex)}),Object(Gt["a"])(ct,Nt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.height=e.height)}),Object(Gt["a"])(ct,Tt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.width=e.width)}),Object(Gt["a"])(ct,kt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.top=e.top)}),Object(Gt["a"])(ct,It,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.left=e.left)}),Object(Gt["a"])(ct,St,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.minh=e.minh)}),Object(Gt["a"])(ct,Lt,function(t,e){var i=Xt(t[e.name],e.id);i&&(i.minw=e.minw)}),Object(Gt["a"])(ct,Rt,function(t,e){var i=JSON.parse(JSON.stringify(t.initContainer));switch(i.top=e.y,i.left=e.x,i.id=(new Date).getTime(),e.eleType){case"panel":i.element=JSON.parse(JSON.stringify(t.initPanel)),i.element.config.width=i.width-2,i.element.config.height=i.height-2,i.element.config.currentPanelId=i.id;break;case"label":i.element=JSON.parse(JSON.stringify(t.initText));break;case"picture":i.element=JSON.parse(JSON.stringify(t.initPicture));break}if(-1==e.parentId)t[e.name].push(i);else{var n=Xt(t[e.name],e.parentId);n&&n.element.config.children.push(i)}}),Object(Gt["a"])(ct,Bt,function(t,e){var i=Xt(t[e.name],e.id);if(i&&i.draggable&&i.resizable){if(i.draggable=!1,i.resizable=!1,i.zIndex=1e3,i.color="#ffffff","panel"==i.element.type&&(i.element.config.allowDrop=!0,i.element.config.width=i.width-2,i.element.config.height=i.height-2,i.element.config.currentPanelId=i.id,i.element.config.children.forEach(function(t,e){t.unableActive=!1})),t.currentChoose.length){var n=t.currentChoose[t.currentChoose.length-1];n.element.config.coverVisible=!0}t.currentChoose.push(i)}}),Object(Gt["a"])(ct,Dt,function(t){var e=t.currentChoose.pop();if(e.draggable=!0,e.resizable=!0,e.zIndex=e.saveIndex,e.color="none","panel"==e.element.type&&(e.element.config.allowDrop=!1,e.element.config.coverVisible=!1,e.element.config.children.forEach(function(t,e){t.unableActive=!0})),t.currentChoose.length){var i=t.currentChoose[t.currentChoose.length-1];i.element.config.coverVisible=!1}}),Object(Gt["a"])(ct,Ot,function(t){while(t.currentChoose.length>0){var e=t.currentChoose.pop();e.draggable=!0,e.resizable=!0,e.zIndex=e.saveIndex,e.color="none","panel"==e.element.type&&(e.element.config.allowDrop=!1,e.element.config.coverVisible=!1,e.element.config.children.forEach(function(t,e){t.unableActive=!0}))}}),Object(Gt["a"])(ct,Ht,function(t,e){for(var i in e)if("function"!=typeof e[i]&&"eleStyle"!=i&&(t.currentChoose[t.currentChoose.length-1].element.config[i]=e[i]),"eleStyle"==i)for(var n in e[i])t.currentChoose[t.currentChoose.length-1].element.config[i][n]=e[i][n],"font-size"==n&&(t.currentChoose[t.currentChoose.length-1].element.config.eleStyle["font-size"]+="px")}),ct);function Xt(t,e){var i=[];i=i.concat(t);while(i.length){var n=i.shift();if(n.element.config.children&&(i=i.concat(n.element.config.children)),n.id===e)return n}}function Wt(t){var e=[],i=[];e=e.concat(t);while(e.length){var n=e.shift();i.push(n),n.element.config.children&&(e=e.concat(n.element.config.children))}return i}i("df7c");var Mt={rects:[],currentChoose:[],initContainer:{id:"",width:100,height:100,top:0,left:0,draggable:!0,resizable:!0,minw:10,minh:10,axis:"both",parentLim:!0,aspectRatio:!1,zIndex:1,saveIndex:1,color:"none",visibility:"visible",active:!1,unableActive:!1,element:{}},initPanel:{type:"panel",config:{currentPanelId:"",width:0,height:0,allowDrop:!1,coverVisible:!1,children:[]},style:{position:"relative",width:"100%",height:"100%"}},initText:{type:"label",config:{text:"单行文字",eleStyle:{"font-size":"14px",color:"#000000","font-weight":"normal","font-family":"宋体"}},style:{}},initPicture:{type:"picture",config:{src:"images/test/Layer4.png",eleStyle:{}},style:{}}},Vt={namespaced:!0,actions:Pt,getters:$t,mutations:jt,state:Mt};n["a"].use(ht["a"]);var Yt=!1,Ft=new ht["a"].Store({modules:{rect:Vt},strict:Yt});n["a"].config.productionTip=!1,new n["a"]({el:"#app",store:Ft,render:function(t){return t(lt)}})},"6a60":function(t,e,i){"use strict";var n=i("961b"),a=i.n(n);a.a},"6cf1":function(t,e,i){"use strict";var n=i("d1c3"),a=i.n(n);a.a},"739d":function(t,e,i){},"780e":function(t,e,i){"use strict";var n=i("e1b1"),a=i.n(n);a.a},"961b":function(t,e,i){},a2e4:function(t,e,i){},bb07:function(t,e,i){},cd4d:function(t,e,i){},d1c3:function(t,e,i){},d659:function(t,e,i){},db45:function(t,e,i){"use strict";var n=i("bb07"),a=i.n(n);a.a},e1b1:function(t,e,i){},e6e2:function(t,e,i){},e6e8:function(t,e,i){"use strict";var n=i("cd4d"),a=i.n(n);a.a},eb37:function(t,e,i){"use strict";var n=i("a2e4"),a=i.n(n);a.a},f1d8:function(t,e,i){"use strict";var n=i("739d"),a=i.n(n);a.a}});
//# sourceMappingURL=app.13a4493e.js.map